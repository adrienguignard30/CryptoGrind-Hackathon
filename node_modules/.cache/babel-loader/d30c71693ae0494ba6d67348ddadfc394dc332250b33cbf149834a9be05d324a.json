{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Adrien\\\\Desktop\\\\CryptoGrind - Copie\\\\client\\\\src\\\\components\\\\Header.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport grindcoin from '../assets/grindcoin.gif';\nimport { GrindContext } from '../App';\nimport { useAccount, useConnect, useDisconnect } from 'wagmi';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Header() {\n  _s();\n  var _window$ethereum;\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const {\n    account\n  } = useContext(GrindContext);\n  const {\n    isConnected\n  } = useAccount();\n  const {\n    connect,\n    connectors\n  } = useConnect();\n  const {\n    disconnect\n  } = useDisconnect();\n  const [notificationCount, setNotificationCount] = useState(0);\n  const [wenNotificationCount, setWenNotificationCount] = useState(0);\n  const [xAccount, setXAccount] = useState(null);\n\n  // Charger la langue depuis localStorage au démarrage\n  useEffect(() => {\n    const savedLang = localStorage.getItem('language');\n    const validLangs = ['en', 'fr'];\n    if (savedLang && validLangs.includes(savedLang)) {\n      i18n.changeLanguage(savedLang);\n    } else {\n      i18n.changeLanguage('en');\n      localStorage.setItem('language', 'en');\n    }\n  }, [i18n]);\n\n  // Gérer le changement de langue\n  const handleLanguageChange = lang => {\n    i18n.changeLanguage(lang);\n    localStorage.setItem('language', lang);\n  };\n  console.log('Connecteurs disponibles:', connectors);\n  console.log('window.ethereum disponible:', !!window.ethereum);\n  console.log('MetaMask détecté:', (_window$ethereum = window.ethereum) === null || _window$ethereum === void 0 ? void 0 : _window$ethereum.isMetaMask);\n  const updateNotificationCounts = () => {\n    if (!account) {\n      console.log('Aucun account, compteurs à 0');\n      setNotificationCount(0);\n      setWenNotificationCount(0);\n      localStorage.setItem(`notificationCount_${account}`, '0');\n      localStorage.setItem(`wenNotificationCount_${account}`, '0');\n      return;\n    }\n\n    // Logique pour notifications normales (inchangée)\n    const savedProjects = localStorage.getItem(`projects_${account}`);\n    const projects = savedProjects ? JSON.parse(savedProjects) : [];\n    console.log('Projets chargés:', projects.length);\n    const today = new Date();\n    const tomorrow = new Date(today);\n    tomorrow.setDate(today.getDate() + 1);\n    const todayStr = today.toISOString().split('T')[0];\n    const tomorrowStr = tomorrow.toISOString().split('T')[0];\n    const todayProjects = projects.filter(project => project.mintDate === todayStr).length;\n    const tomorrowProjects = projects.filter(project => project.mintDate === tomorrowStr).length;\n    console.log(`Projets aujourd'hui: ${todayProjects}, demain: ${tomorrowProjects}`);\n    const totalNotificationCount = todayProjects + tomorrowProjects;\n    console.log('Calcul compteur notifications normales:', totalNotificationCount);\n    localStorage.setItem(`notificationCount_${account}`, totalNotificationCount.toString());\n    setNotificationCount(totalNotificationCount);\n\n    // Logique pour notifications WEN\n    const savedWenNotifications = localStorage.getItem(`wenNotifications_${account}`);\n    const wenNotifications = savedWenNotifications ? JSON.parse(savedWenNotifications) : [];\n    console.log('Notifications WEN chargées:', wenNotifications);\n\n    // Filtrer les notifications WEN valides\n    const validWenNotifications = wenNotifications.filter(notif => {\n      if (!notif.notificationFrequency || notif.notificationFrequency === '') {\n        console.log(`Notification WEN ignorée (pas de frequency):`, notif);\n        return false;\n      }\n\n      // Calculer la prochaine date de notification\n      const frequencyDays = parseInt(notif.notificationFrequency, 10);\n      const createdAt = new Date(notif.createdAt);\n      if (isNaN(createdAt.getTime())) {\n        console.log(`Date createdAt invalide pour notification WEN:`, notif);\n        return false;\n      }\n      const today = new Date();\n      const daysSinceCreation = Math.floor((today - createdAt) / (1000 * 60 * 60 * 24));\n      const notificationsPassed = Math.floor(daysSinceCreation / frequencyDays);\n      const nextNotificationDate = new Date(createdAt);\n      nextNotificationDate.setDate(createdAt.getDate() + (notificationsPassed + 1) * frequencyDays);\n\n      // Vérifier la fenêtre de temps (1 jour avant/après)\n      const startDate = new Date(nextNotificationDate);\n      startDate.setDate(startDate.getDate() - 1); // 1 jour avant\n      const endDate = new Date(nextNotificationDate);\n      endDate.setDate(endDate.getDate() + 1); // 1 jour après\n\n      const isInWindow = today >= startDate && today <= endDate;\n      console.log(`Notification WEN ${notif.id}: frequency=${frequencyDays}, createdAt=${createdAt}, next=${nextNotificationDate}, inWindow=${isInWindow}`);\n      return isInWindow;\n    });\n    console.log('Notifications WEN valides:', validWenNotifications.length);\n    localStorage.setItem(`wenNotificationCount_${account}`, validWenNotifications.length.toString());\n    setWenNotificationCount(validWenNotifications.length);\n  };\n\n  // Mettre à jour les compteurs au changement de compte\n  useEffect(() => {\n    updateNotificationCounts();\n  }, [account]);\n\n  // Écouteur pour événement storage (compatibilité avec Home.js et NotificationWen.js)\n  useEffect(() => {\n    const handleStorageChange = event => {\n      if (event.key === `wenNotifications_${account}` || event.key === `projects_${account}` || event.key === null // Événement manuel via dispatchEvent\n      ) {\n        console.log('Événement storage reçu, mise à jour compteurs');\n        updateNotificationCounts();\n      }\n    };\n    window.addEventListener('storage', handleStorageChange);\n    // Garder updateNotifications pour compatibilité future\n    const handleNotificationUpdate = () => {\n      console.log('Événement updateNotifications reçu, mise à jour compteurs');\n      updateNotificationCounts();\n    };\n    window.addEventListener('updateNotifications', handleNotificationUpdate);\n    return () => {\n      window.removeEventListener('storage', handleStorageChange);\n      window.removeEventListener('updateNotifications', handleNotificationUpdate);\n    };\n  }, [account]);\n  const handleConnectMetaMask = async () => {\n    try {\n      console.log('Tentative de connexion MetaMask');\n      const metaMaskConnector = connectors.find(c => c.id === 'injected');\n      if (metaMaskConnector) {\n        console.log('Connecteur injected trouvé:', metaMaskConnector);\n        connect({\n          connector: metaMaskConnector\n        });\n      } else if (window.ethereum && window.ethereum.isMetaMask) {\n        console.log('Connecteur injected non trouvé, tentative directe via window.ethereum');\n        const accounts = await window.ethereum.request({\n          method: 'eth_requestAccounts'\n        });\n        if (accounts.length > 0) {\n          console.log('Connexion MetaMask réussie:', accounts[0]);\n        }\n      } else {\n        console.error('MetaMask non détecté');\n        alert(t('metaMaskNotFound'));\n      }\n    } catch (error) {\n      console.error('Erreur lors de la connexion MetaMask:', error);\n      alert(t('connectionError'));\n    }\n  };\n  const handleConnectWalletConnect = async () => {\n    try {\n      console.log('Tentative de connexion WalletConnect');\n      const walletConnectConnector = connectors.find(c => c.id === 'walletConnect');\n      if (walletConnectConnector) {\n        console.log('Connecteur walletConnect trouvé:', walletConnectConnector);\n        connect({\n          connector: walletConnectConnector\n        });\n      } else {\n        console.error('WalletConnect non détecté');\n        alert(t('walletConnectNotFound'));\n      }\n    } catch (error) {\n      console.error('Erreur lors de la connexion WalletConnect:', error);\n      alert(t('connectionError'));\n    }\n  };\n  const handleDisconnect = () => {\n    console.log('Déconnexion, nettoyage compteurs pour:', account);\n    disconnect();\n    setNotificationCount(0);\n    setWenNotificationCount(0);\n    if (account) {\n      localStorage.removeItem(`notificationCount_${account}`);\n      localStorage.removeItem(`wenNotificationCount_${account}`);\n    }\n  };\n  const connectXAccount = () => {\n    const username = prompt(t('enterXUsername'));\n    if (username) {\n      setXAccount(username);\n    }\n  };\n  const disconnectXAccount = () => {\n    setXAccount(null);\n  };\n  console.log('Account dans Header:', account);\n  console.log('isConnected:', isConnected);\n  console.log('Compteur notifications normales:', notificationCount);\n  console.log('Compteur notifications WEN:', wenNotificationCount);\n  return /*#__PURE__*/_jsxDEV(\"nav\", {\n    className: \"bg-gray-800 p-4 text-white flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: grindcoin,\n        alt: t('appName'),\n        className: \"h-8 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: t('appName')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap space-x-4 items-center\",\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: \"/\",\n        className: \"hover:underline\",\n        children: t('home')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/profile\",\n        className: \"hover:underline\",\n        children: t('profile')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"https://www.makingcoffee.com/\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"hover:underline\",\n        children: t('coffee')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/missions\",\n        className: \"hover:underline\",\n        children: t('missions')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/lottery\",\n        className: \"relative hover:underline flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: `fas fa-envelope mr-1 ${wenNotificationCount > 0 && isConnected ? 'text-blue-500 animate-pulse' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this), t('notificationWen'), wenNotificationCount > 0 && isConnected && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute top-0 right-0 -mt-2 -mr-2 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs animate-pulse\",\n          children: wenNotificationCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/notifications\",\n        className: \"relative hover:underline flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: `fas fa-envelope mr-1 ${notificationCount > 0 && isConnected ? 'text-red-500 animate-pulse' : ''}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), t('notifications'), notificationCount > 0 && isConnected && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs animate-pulse\",\n          children: notificationCount\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleLanguageChange('en'),\n          className: `p-2 rounded ${i18n.language === 'en' ? 'bg-blue-500' : 'bg-gray-600'} hover:bg-blue-600`,\n          title: \"English\",\n          children: \"\\uD83C\\uDDEC\\uD83C\\uDDE7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleLanguageChange('fr'),\n          className: `p-2 rounded ${i18n.language === 'fr' ? 'bg-blue-500' : 'bg-gray-600'} hover:bg-blue-600`,\n          title: \"Fran\\xE7ais\",\n          children: \"\\uD83C\\uDDEB\\uD83C\\uDDF7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), isConnected ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: account ? `${account.slice(0, 6)}...${account.slice(-4)}` : t('connected')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDisconnect,\n          className: \"bg-red-500 px-3 py-1 rounded text-sm hover:bg-red-600\",\n          children: t('disconnectWallet')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleConnectMetaMask,\n          className: \"bg-blue-500 px-3 py-1 rounded hover:bg-blue-600\",\n          children: t('connectMetaMask')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleConnectWalletConnect,\n          className: \"bg-green-500 px-3 py-1 rounded hover:bg-green-600\",\n          children: t('connectWalletConnect')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this), xAccount ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: t('xAccount', {\n            username: xAccount\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: disconnectXAccount,\n          className: \"bg-red-500 px-3 py-1 rounded text-sm hover:bg-red-600\",\n          children: t('disconnectX')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connectXAccount,\n        className: \"bg-blue-500 px-3 py-1 rounded hover:bg-blue-600\",\n        children: t('connectX')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 214,\n    columnNumber: 5\n  }, this);\n}\n_s(Header, \"mN/SAUtr5n4Yn7lTcO8UnxD3hws=\", false, function () {\n  return [useTranslation, useAccount, useConnect, useDisconnect];\n});\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["React","useContext","useState","useEffect","Link","grindcoin","GrindContext","useAccount","useConnect","useDisconnect","useTranslation","jsxDEV","_jsxDEV","Header","_s","_window$ethereum","t","i18n","account","isConnected","connect","connectors","disconnect","notificationCount","setNotificationCount","wenNotificationCount","setWenNotificationCount","xAccount","setXAccount","savedLang","localStorage","getItem","validLangs","includes","changeLanguage","setItem","handleLanguageChange","lang","console","log","window","ethereum","isMetaMask","updateNotificationCounts","savedProjects","projects","JSON","parse","length","today","Date","tomorrow","setDate","getDate","todayStr","toISOString","split","tomorrowStr","todayProjects","filter","project","mintDate","tomorrowProjects","totalNotificationCount","toString","savedWenNotifications","wenNotifications","validWenNotifications","notif","notificationFrequency","frequencyDays","parseInt","createdAt","isNaN","getTime","daysSinceCreation","Math","floor","notificationsPassed","nextNotificationDate","startDate","endDate","isInWindow","id","handleStorageChange","event","key","addEventListener","handleNotificationUpdate","removeEventListener","handleConnectMetaMask","metaMaskConnector","find","c","connector","accounts","request","method","error","alert","handleConnectWalletConnect","walletConnectConnector","handleDisconnect","removeItem","connectXAccount","username","prompt","disconnectXAccount","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","to","href","target","rel","onClick","language","title","slice","_c","$RefreshReg$"],"sources":["C:/Users/Adrien/Desktop/CryptoGrind - Copie/client/src/components/Header.js"],"sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport grindcoin from '../assets/grindcoin.gif';\r\nimport { GrindContext } from '../App';\r\nimport { useAccount, useConnect, useDisconnect } from 'wagmi';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nfunction Header() {\r\n  const { t, i18n } = useTranslation();\r\n  const { account } = useContext(GrindContext);\r\n  const { isConnected } = useAccount();\r\n  const { connect, connectors } = useConnect();\r\n  const { disconnect } = useDisconnect();\r\n  const [notificationCount, setNotificationCount] = useState(0);\r\n  const [wenNotificationCount, setWenNotificationCount] = useState(0);\r\n  const [xAccount, setXAccount] = useState(null);\r\n\r\n  // Charger la langue depuis localStorage au démarrage\r\n  useEffect(() => {\r\n    const savedLang = localStorage.getItem('language');\r\n    const validLangs = ['en', 'fr'];\r\n    if (savedLang && validLangs.includes(savedLang)) {\r\n      i18n.changeLanguage(savedLang);\r\n    } else {\r\n      i18n.changeLanguage('en');\r\n      localStorage.setItem('language', 'en');\r\n    }\r\n  }, [i18n]);\r\n\r\n  // Gérer le changement de langue\r\n  const handleLanguageChange = (lang) => {\r\n    i18n.changeLanguage(lang);\r\n    localStorage.setItem('language', lang);\r\n  };\r\n\r\n  console.log('Connecteurs disponibles:', connectors);\r\n  console.log('window.ethereum disponible:', !!window.ethereum);\r\n  console.log('MetaMask détecté:', window.ethereum?.isMetaMask);\r\n\r\n  const updateNotificationCounts = () => {\r\n    if (!account) {\r\n      console.log('Aucun account, compteurs à 0');\r\n      setNotificationCount(0);\r\n      setWenNotificationCount(0);\r\n      localStorage.setItem(`notificationCount_${account}`, '0');\r\n      localStorage.setItem(`wenNotificationCount_${account}`, '0');\r\n      return;\r\n    }\r\n\r\n    // Logique pour notifications normales (inchangée)\r\n    const savedProjects = localStorage.getItem(`projects_${account}`);\r\n    const projects = savedProjects ? JSON.parse(savedProjects) : [];\r\n    console.log('Projets chargés:', projects.length);\r\n\r\n    const today = new Date();\r\n    const tomorrow = new Date(today);\r\n    tomorrow.setDate(today.getDate() + 1);\r\n    const todayStr = today.toISOString().split('T')[0];\r\n    const tomorrowStr = tomorrow.toISOString().split('T')[0];\r\n\r\n    const todayProjects = projects.filter((project) => project.mintDate === todayStr).length;\r\n    const tomorrowProjects = projects.filter((project) => project.mintDate === tomorrowStr).length;\r\n    console.log(`Projets aujourd'hui: ${todayProjects}, demain: ${tomorrowProjects}`);\r\n\r\n    const totalNotificationCount = todayProjects + tomorrowProjects;\r\n    console.log('Calcul compteur notifications normales:', totalNotificationCount);\r\n    localStorage.setItem(`notificationCount_${account}`, totalNotificationCount.toString());\r\n    setNotificationCount(totalNotificationCount);\r\n\r\n    // Logique pour notifications WEN\r\n    const savedWenNotifications = localStorage.getItem(`wenNotifications_${account}`);\r\n    const wenNotifications = savedWenNotifications ? JSON.parse(savedWenNotifications) : [];\r\n    console.log('Notifications WEN chargées:', wenNotifications);\r\n\r\n    // Filtrer les notifications WEN valides\r\n    const validWenNotifications = wenNotifications.filter((notif) => {\r\n      if (!notif.notificationFrequency || notif.notificationFrequency === '') {\r\n        console.log(`Notification WEN ignorée (pas de frequency):`, notif);\r\n        return false;\r\n      }\r\n\r\n      // Calculer la prochaine date de notification\r\n      const frequencyDays = parseInt(notif.notificationFrequency, 10);\r\n      const createdAt = new Date(notif.createdAt);\r\n      if (isNaN(createdAt.getTime())) {\r\n        console.log(`Date createdAt invalide pour notification WEN:`, notif);\r\n        return false;\r\n      }\r\n\r\n      const today = new Date();\r\n      const daysSinceCreation = Math.floor((today - createdAt) / (1000 * 60 * 60 * 24));\r\n      const notificationsPassed = Math.floor(daysSinceCreation / frequencyDays);\r\n      const nextNotificationDate = new Date(createdAt);\r\n      nextNotificationDate.setDate(createdAt.getDate() + (notificationsPassed + 1) * frequencyDays);\r\n\r\n      // Vérifier la fenêtre de temps (1 jour avant/après)\r\n      const startDate = new Date(nextNotificationDate);\r\n      startDate.setDate(startDate.getDate() - 1); // 1 jour avant\r\n      const endDate = new Date(nextNotificationDate);\r\n      endDate.setDate(endDate.getDate() + 1); // 1 jour après\r\n\r\n      const isInWindow = today >= startDate && today <= endDate;\r\n      console.log(\r\n        `Notification WEN ${notif.id}: frequency=${frequencyDays}, createdAt=${createdAt}, next=${nextNotificationDate}, inWindow=${isInWindow}`\r\n      );\r\n      return isInWindow;\r\n    });\r\n\r\n    console.log('Notifications WEN valides:', validWenNotifications.length);\r\n    localStorage.setItem(`wenNotificationCount_${account}`, validWenNotifications.length.toString());\r\n    setWenNotificationCount(validWenNotifications.length);\r\n  };\r\n\r\n  // Mettre à jour les compteurs au changement de compte\r\n  useEffect(() => {\r\n    updateNotificationCounts();\r\n  }, [account]);\r\n\r\n  // Écouteur pour événement storage (compatibilité avec Home.js et NotificationWen.js)\r\n  useEffect(() => {\r\n    const handleStorageChange = (event) => {\r\n      if (\r\n        event.key === `wenNotifications_${account}` ||\r\n        event.key === `projects_${account}` ||\r\n        event.key === null // Événement manuel via dispatchEvent\r\n      ) {\r\n        console.log('Événement storage reçu, mise à jour compteurs');\r\n        updateNotificationCounts();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('storage', handleStorageChange);\r\n    // Garder updateNotifications pour compatibilité future\r\n    const handleNotificationUpdate = () => {\r\n      console.log('Événement updateNotifications reçu, mise à jour compteurs');\r\n      updateNotificationCounts();\r\n    };\r\n    window.addEventListener('updateNotifications', handleNotificationUpdate);\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', handleStorageChange);\r\n      window.removeEventListener('updateNotifications', handleNotificationUpdate);\r\n    };\r\n  }, [account]);\r\n\r\n  const handleConnectMetaMask = async () => {\r\n    try {\r\n      console.log('Tentative de connexion MetaMask');\r\n      const metaMaskConnector = connectors.find((c) => c.id === 'injected');\r\n      if (metaMaskConnector) {\r\n        console.log('Connecteur injected trouvé:', metaMaskConnector);\r\n        connect({ connector: metaMaskConnector });\r\n      } else if (window.ethereum && window.ethereum.isMetaMask) {\r\n        console.log('Connecteur injected non trouvé, tentative directe via window.ethereum');\r\n        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n        if (accounts.length > 0) {\r\n          console.log('Connexion MetaMask réussie:', accounts[0]);\r\n        }\r\n      } else {\r\n        console.error('MetaMask non détecté');\r\n        alert(t('metaMaskNotFound'));\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la connexion MetaMask:', error);\r\n      alert(t('connectionError'));\r\n    }\r\n  };\r\n\r\n  const handleConnectWalletConnect = async () => {\r\n    try {\r\n      console.log('Tentative de connexion WalletConnect');\r\n      const walletConnectConnector = connectors.find((c) => c.id === 'walletConnect');\r\n      if (walletConnectConnector) {\r\n        console.log('Connecteur walletConnect trouvé:', walletConnectConnector);\r\n        connect({ connector: walletConnectConnector });\r\n      } else {\r\n        console.error('WalletConnect non détecté');\r\n        alert(t('walletConnectNotFound'));\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de la connexion WalletConnect:', error);\r\n      alert(t('connectionError'));\r\n    }\r\n  };\r\n\r\n  const handleDisconnect = () => {\r\n    console.log('Déconnexion, nettoyage compteurs pour:', account);\r\n    disconnect();\r\n    setNotificationCount(0);\r\n    setWenNotificationCount(0);\r\n    if (account) {\r\n      localStorage.removeItem(`notificationCount_${account}`);\r\n      localStorage.removeItem(`wenNotificationCount_${account}`);\r\n    }\r\n  };\r\n\r\n  const connectXAccount = () => {\r\n    const username = prompt(t('enterXUsername'));\r\n    if (username) {\r\n      setXAccount(username);\r\n    }\r\n  };\r\n\r\n  const disconnectXAccount = () => {\r\n    setXAccount(null);\r\n  };\r\n\r\n  console.log('Account dans Header:', account);\r\n  console.log('isConnected:', isConnected);\r\n  console.log('Compteur notifications normales:', notificationCount);\r\n  console.log('Compteur notifications WEN:', wenNotificationCount);\r\n\r\n  return (\r\n    <nav className=\"bg-gray-800 p-4 text-white flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0\">\r\n      <div className=\"flex items-center\">\r\n        <img src={grindcoin} alt={t('appName')} className=\"h-8 mr-2\" />\r\n        <span>{t('appName')}</span>\r\n      </div>\r\n      <div className=\"flex flex-wrap space-x-4 items-center\">\r\n        <Link to=\"/\" className=\"hover:underline\">\r\n          {t('home')}\r\n        </Link>\r\n        <Link to=\"/profile\" className=\"hover:underline\">\r\n          {t('profile')}\r\n        </Link>\r\n        <a\r\n          href=\"https://www.makingcoffee.com/\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"hover:underline\"\r\n        >\r\n          {t('coffee')}\r\n        </a>\r\n        <Link to=\"/missions\" className=\"hover:underline\">\r\n          {t('missions')}\r\n        </Link>\r\n        <Link to=\"/lottery\" className=\"relative hover:underline flex items-center\">\r\n          <i\r\n            className={`fas fa-envelope mr-1 ${\r\n              wenNotificationCount > 0 && isConnected ? 'text-blue-500 animate-pulse' : ''\r\n            }`}\r\n          ></i>\r\n          {t('notificationWen')}\r\n          {wenNotificationCount > 0 && isConnected && (\r\n            <span className=\"absolute top-0 right-0 -mt-2 -mr-2 bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs animate-pulse\">\r\n              {wenNotificationCount}\r\n            </span>\r\n          )}\r\n        </Link>\r\n        <Link to=\"/notifications\" className=\"relative hover:underline flex items-center\">\r\n          <i\r\n            className={`fas fa-envelope mr-1 ${\r\n              notificationCount > 0 && isConnected ? 'text-red-500 animate-pulse' : ''\r\n            }`}\r\n          ></i>\r\n          {t('notifications')}\r\n          {notificationCount > 0 && isConnected && (\r\n            <span className=\"absolute top-0 right-0 -mt-2 -mr-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs animate-pulse\">\r\n              {notificationCount}\r\n            </span>\r\n          )}\r\n        </Link>\r\n        {/* Boutons de langue avec drapeaux */}\r\n        <div className=\"flex space-x-2\">\r\n          <button\r\n            onClick={() => handleLanguageChange('en')}\r\n            className={`p-2 rounded ${i18n.language === 'en' ? 'bg-blue-500' : 'bg-gray-600'} hover:bg-blue-600`}\r\n            title=\"English\"\r\n          >\r\n            🇬🇧\r\n          </button>\r\n          <button\r\n            onClick={() => handleLanguageChange('fr')}\r\n            className={`p-2 rounded ${i18n.language === 'fr' ? 'bg-blue-500' : 'bg-gray-600'} hover:bg-blue-600`}\r\n            title=\"Français\"\r\n          >\r\n            🇫🇷\r\n          </button>\r\n        </div>\r\n        {isConnected ? (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span>{account ? `${account.slice(0, 6)}...${account.slice(-4)}` : t('connected')}</span>\r\n            <button\r\n              onClick={handleDisconnect}\r\n              className=\"bg-red-500 px-3 py-1 rounded text-sm hover:bg-red-600\"\r\n            >\r\n              {t('disconnectWallet')}\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <div className=\"flex space-x-2\">\r\n            <button\r\n              onClick={handleConnectMetaMask}\r\n              className=\"bg-blue-500 px-3 py-1 rounded hover:bg-blue-600\"\r\n            >\r\n              {t('connectMetaMask')}\r\n            </button>\r\n            <button\r\n              onClick={handleConnectWalletConnect}\r\n              className=\"bg-green-500 px-3 py-1 rounded hover:bg-green-600\"\r\n            >\r\n              {t('connectWalletConnect')}\r\n            </button>\r\n          </div>\r\n        )}\r\n        {xAccount ? (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span>{t('xAccount', { username: xAccount })}</span>\r\n            <button\r\n              onClick={disconnectXAccount}\r\n              className=\"bg-red-500 px-3 py-1 rounded text-sm hover:bg-red-600\"\r\n            >\r\n              {t('disconnectX')}\r\n            </button>\r\n          </div>\r\n        ) : (\r\n          <button\r\n            onClick={connectXAccount}\r\n            className=\"bg-blue-500 px-3 py-1 rounded hover:bg-blue-600\"\r\n          >\r\n            {t('connectX')}\r\n          </button>\r\n        )}\r\n      </div>\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}